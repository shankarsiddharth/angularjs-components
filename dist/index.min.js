function dataTableController(r,t){var e=this;e.$onInit=function(){e.data=[],e.isDataLoading=!0,e.start=1,e.end=10,e.total=50,e.totalPages=0,e.searchtext="",e.currentPage=1,e.options={},e.initPage=function(r){e.total=r.totalSize,e.currentPage=r.page,e.rppvalue=r.pageSize,r.totalSize>r.pageSize?r.totalSize%r.pageSize==0?e.totalPages=parseInt(r.totalSize/r.pageSize):e.totalPages=parseInt(r.totalSize/r.pageSize)+1:e.totalPages=1,0==e.total?e.start=0:e.start=(r.page-1)*r.pageSize+1,r.resultSize==r.pageSize?e.end=r.page*r.pageSize:e.end=(r.page-1)*r.pageSize+r.resultSize},t.login().then(function(o){r.token=o.data.token,t.getData(e.options).then(function(r){e.initPage(r.data),e.isDataLoading=!1,e.data=r.data.result},function(r){})},function(r){console.error("Failed to login, maybe due to CORS"),console.error(r),e.errorMessage="Please, use a browser with CORS disabled, to view the content."}),e.initSort()},e.initSort=function(){e.sort={li:{order:null,icon:"fa-sort"},cn:{order:null,icon:"fa-sort"},s:{order:null,icon:"fa-sort"},pc:{order:null,icon:"fa-sort"},ct:{order:null,icon:"fa-sort"},ph:{order:null,icon:"fa-sort"},p:{order:null,icon:"fa-sort"},dir:{order:null,icon:"fa-sort"},ls:{order:null,icon:"fa-sort"}}},e.initSortIcon=function(){for(let r in e.sort)e.sort.hasOwnProperty(r)&&(e.sort[r].icon="fa-sort")},e.getData=function(r){t.getData(r).then(function(r){e.data=r.data.result,e.initPage(r.data)})},e.rppChange=function(r){e.rppvalue=r,e.options.page=1,e.options.pageSize=e.rppvalue,e.getData(e.options)},e.changePage=function(r){e.currentPage=r,e.options.page=r,e.getData(e.options)},e.simpleSearch=function(r){e.options.filter&&delete e.options.filter,e.options.search=r,e.getData(e.options)},e.advSearch=function(r){e.options.search&&delete e.options.search,e.options.filter=r,e.getData(e.options)},e.filterCancel=function(){e.options.filter&&delete e.options.filter},e.reset=function(){e.options={},e.initSort(),e.getData(e.options)},e.getDate=function(r){let t="not submitted";if(r){let e=r.split("T"),o=e[0].split("-"),n=o[2]+"."+o[1]+"."+o[0],a=e[1].split(":"),i=a[0]+":"+a[1];t=n+" - "+i}return t},e.applySort=function(r){switch(e.initSortIcon(),r){case"li":e.options.orderBy="zurmo_account_id",e.sort.li.order?(e.sort.li.order="ASC"==e.sort.li.order?"DESC":"ASC",e.options.order=e.sort.li.order):(e.sort.li.order="ASC",e.options.order=e.sort.li.order),"ASC"==e.sort.li.order?e.sort.li.icon="fa-sort-asc":e.sort.li.icon="fa-sort-desc";break;case"cn":e.options.orderBy="company_name",e.sort.cn.order?(e.sort.cn.order="ASC"==e.sort.cn.order?"DESC":"ASC",e.options.order=e.sort.cn.order):(e.sort.cn.order="ASC",e.options.order=e.sort.cn.order),"ASC"==e.sort.cn.order?e.sort.cn.icon="fa-sort-asc":e.sort.cn.icon="fa-sort-desc";break;case"s":e.options.orderBy="street",e.sort.s.order?(e.sort.s.order="ASC"==e.sort.s.order?"DESC":"ASC",e.options.order=e.sort.s.order):(e.sort.s.order="ASC",e.options.order=e.sort.s.order),"ASC"==e.sort.s.order?e.sort.s.icon="fa-sort-asc":e.sort.s.icon="fa-sort-desc";break;case"pc":e.options.orderBy="zip",e.sort.pc.order?(e.sort.pc.order="ASC"==e.sort.pc.order?"DESC":"ASC",e.options.order=e.sort.pc.order):(e.sort.pc.order="ASC",e.options.order=e.sort.pc.order),"ASC"==e.sort.pc.order?e.sort.pc.icon="fa-sort-asc":e.sort.pc.icon="fa-sort-desc";break;case"ct":e.options.orderBy="city",e.sort.ct.order?(e.sort.ct.order="ASC"==e.sort.ct.order?"DESC":"ASC",e.options.order=e.sort.ct.order):(e.sort.ct.order="ASC",e.options.order=e.sort.ct.order),"ASC"==e.sort.ct.order?e.sort.ct.icon="fa-sort-asc":e.sort.ct.icon="fa-sort-desc";break;case"p":e.options.orderBy="plan_name",e.sort.p.order?(e.sort.p.order="ASC"==e.sort.p.order?"DESC":"ASC",e.options.order=e.sort.p.order):(e.sort.p.order="ASC",e.options.order=e.sort.p.order),"ASC"==e.sort.p.order?e.sort.p.icon="fa-sort-asc":e.sort.p.icon="fa-sort-desc";break;case"ls":e.options.orderBy="last_submit",e.sort.ls.order?(e.sort.ls.order="ASC"==e.sort.ls.order?"DESC":"ASC",e.options.order=e.sort.ls.order):(e.sort.ls.order="ASC",e.options.order=e.sort.ls.order),"ASC"==e.sort.ls.order?e.sort.ls.icon="fa-sort-asc":e.sort.ls.icon="fa-sort-desc";break;default:console.log("Default")}e.getData(e.options)}}function recordsInfoController(){var r=this;r.$onInit=function(){r.canRender=!0,r.start||(r.canRender=!1,console.error('<records-info> directive requires "start" attribute')),r.end||(r.canRender=!1,console.error('<records-info> directive requires "end" attribute')),r.total||(r.canRender=!1,console.error('<records-info> directive requires "total" attribute'))}}function searchAreaController(){var r=this;r.$onInit=function(){r.showAdvSearch=!1,r.searchDisabled=!1,r.filter={}},r.toggleAdvSearch=function(){r.showAdvSearch=!r.showAdvSearch,r.searchDisabled=r.showAdvSearch,r.searchDisabled&&(r.searchText=""),r.showAdvSearch||r.filterCancel()},r.resetSearchBar=function(){r.searchText="",r.onReset()},r.simpleSearchHandler=function(t){t&&r.simpleSearch({text:t})},r.updateRecordsPerPage=function(t){r.onRecordsPerPageChange({rpp:t})},r.cancelFilter=function(){r.locationid=void 0,r.companyname=void 0,r.city=void 0,r.street=void 0,r.zip=void 0,r.planname=void 0,r.rating=void 0,r.submit=void 0,r.filter={},r.filterCancel()},r.applyFilter=function(){if(r.filter={},r.locationid){r.filter.zurmo_account_id=[];let t=r.locationid.split(",");for(i in t)r.filter.zurmo_account_id.push(t[i].toString().trim())}if(r.companyname){r.filter.company_name=[];let t=r.companyname.split(",");for(i in t)r.filter.company_name.push(t[i].toString().trim())}if(r.city){r.filter.city=[];let t=r.city.split(",");for(i in t)r.filter.city.push(t[i].toString().trim())}if(r.street){r.filter.street=[];let t=r.street.split(",");for(i in t)r.filter.street.push(t[i].toString().trim())}if(r.zip){r.filter.zip=[];let t=r.zip.split(",");for(i in t)r.filter.zip.push(t[i].toString().trim())}if(r.planname){r.filter.plan_name=[];let t=r.planname.split(",");for(i in t)r.filter.plan_name.push(t[i].toString().trim())}if(r.rating){r.filter.overall_rating=[];let t=r.rating.split(",");for(i in t)r.filter.overall_rating.push(t[i].toString().trim())}if(r.submit){r.filter.submit=[];let t=r.submit.split(",");for(i in t)r.filter.submit.push(t[i].toString().trim())}angular.equals(r.filter,{})||r.advSearch({filter:r.filter})}}function recordsPerPageController(){var r=this;r.$onInit=function(){r.value?r.recordsPerPageList=[10,20,30,40,50]:console.error('<records-per-page> directive requires "initial-value" attribute, that can have the values from the list [10, 20, 30, 40, 50].')}}function paginationController(){var r=this;r.currentPage=1,r.initPageList=function(r){let t=[];for(let e=1;e<=r;e++)t.push(e);return t},r.$onInit=function(){r.totalPages?r.pageList=r.initPageList(r.totalPages):console.error('<pagination> directive requires "total-pages" attribute')},r.$onChanges=function(t){t.totalPages.currentValue&&(r.pageList=r.initPageList(parseInt(t.totalPages.currentValue)))},r.changePage=function(t,e){e?"next"==e?r.currentPage==r.totalPages||(r.currentPage+=1,r.onPageChange({page:r.currentPage})):"prev"==e&&(1==r.currentPage||(r.currentPage-=1,r.onPageChange({page:r.currentPage}))):t&&(r.currentPage=t,r.onPageChange({page:r.currentPage}))}}function searchBarController(){var r=this;r.$onInit=function(){r.canRender=!0,r.search||(r.canRender=!1,console.error('<search-bar> requires the attributes "search-text","search", "is-disabled"'))}}var app=angular.module("app",[]);app.service("dataService",["$http","$rootScope",function(r,t){let e={username:"test@test.test",password:"testtest"};this.login=function(){return r({method:"POST",url:"https://apidev.omnea.org/auth/login",headers:{"Content-Type":"application/json"},data:e})};let o=function(e){return r({method:"POST",url:"https://apidev.omnea.org/ca-internal/accounts",headers:{"Content-Type":"application/json",Authorization:"Bearer "+t.token},data:e})};this.getData=function(r){return o(r)}}]),dataTableController.$inject=["$rootScope","dataService"],app.component("tableData",{controller:dataTableController,templateUrl:"datatable/datatable.component.html"}),app.component("recordsInfo",{bindings:{start:"<",end:"<",total:"<"},controller:recordsInfoController,templateUrl:"recordsinfo/recordsinfo.component.html"}),app.component("searchArea",{bindings:{simpleSearch:"&",advSearch:"&",onReset:"&",onRecordsPerPageChange:"&",rppvalue:"=",filterCancel:"&"},templateUrl:"searcharea/searcharea.component.html",controller:searchAreaController}),app.component("recordsPerPage",{bindings:{value:"=",onChange:"&"},controller:recordsPerPageController,templateUrl:"recordsperpage/recordsperpage.component.html"}),app.component("pagination",{bindings:{totalPages:"<",currentPage:"=",onPageChange:"&"},controller:paginationController,templateUrl:"pagination/pagination.component.html"}),app.component("searchBar",{bindings:{searchText:"=",search:"&",isDisabled:"<"},controller:searchBarController,templateUrl:"searchbar/searchbar.component.html"});
